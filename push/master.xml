<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="4"?>
<?asciidoc-numbered?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en" xml:id="a-collection-of-modules">
<info>
<title>Using the Push Notifications Mobile Service</title>
<date>2019-08-12</date>
</info>
<simpara xml:id="introduction">The Push Notifications service allows you to send native push notifications to different mobile operating systems.</simpara>
<itemizedlist>
<listitem>
<simpara>Code once and push notifications to iOS and Android.</simpara>
</listitem>
<listitem>
<simpara>Push notifications to defined groups.</simpara>
</listitem>
<listitem>
<simpara>Push notifications to either iOS only or Android only.</simpara>
</listitem>
<listitem>
<simpara>Push notifications to different variants of a mobile app.</simpara>
</listitem>
<listitem>
<simpara>Push notifications from different back-end apps to the same mobile app.</simpara>
</listitem>
</itemizedlist>
<simpara>Currently the service supports:</simpara>
<itemizedlist>
<listitem>
<simpara><link xl:href="https://developer.apple.com/notifications/">Apple Push Notification Service</link></simpara>
</listitem>
<listitem>
<simpara><link xl:href="https://firebase.google.com/products/cloud-messaging/">Firebase Cloud Messaging</link></simpara>
</listitem>
</itemizedlist>
<simpara>The Push Notifications service offers a unified Notification Service API to the above mentioned Push Network Services.
It can be seen as a <emphasis>broker</emphasis> that distributes push messages to different 3rd party Push Networks.</simpara>
<note>
<itemizedlist>
<listitem>
<simpara>The payload of the push notification is delivered to 3rd party Push Network providers, Google or Apple. Red Hat recommends that users do not send any sensitive personal or confidential information (for example, a social security number, financial account or transactional information) as part of any Push Notification. Users of push notifications should not have an expectation of secure transmission.</simpara>
</listitem>
<listitem>
<simpara>For analytic purposes, the service stores the content of the alert key sent to the UnifiedPush Server.
The content of the alert key belongs to the metadata, which is deleted after 30 days, using a nightly job within the UnifiedPush Server.</simpara>
</listitem>
<listitem>
<simpara>You are only able to send push notifications to a real device, sending push notifications to an emulator fails.</simpara>
</listitem>
<listitem>
<simpara>Push is a signalling mechanism and is not suitable to be used as a data carrying system, for example, a chat application.</simpara>
</listitem>
</itemizedlist>
</note>
<itemizedlist>
<title>Prerequisites</title>
<listitem>
<simpara>You understand Push Notifications.</simpara>
</listitem>
<listitem>
<simpara>You have logged into the OpenShift console and the Mobile Developer Console.</simpara>
</listitem>
</itemizedlist>
<itemizedlist>
<title>Additional resources</title>
<listitem>
<simpara><link xl:href="https://developer.apple.com/notifications/">Apple Push Notification Service</link></simpara>
</listitem>
<listitem>
<simpara><link xl:href="https://firebase.google.com/products/cloud-messaging/">Firebase Cloud Messaging</link></simpara>
</listitem>
</itemizedlist>
<section xml:id="push-terminology-push">
<title>Push Notifications Terminology</title>
<simpara>This section describes terminology that is associated with Push Notifications.</simpara>
<variablelist>
<varlistentry>
<term>Push Application</term>
<listitem>
<simpara>A logical construct that represents an Mobile App, for example, <emphasis>Mobile HR</emphasis>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Push Notification Message</term>
<listitem>
<simpara>A simple message to be sent to a Push Application.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Sender Endpoint API</term>
<listitem>
<simpara>A RESTful API that receives Push Notification Message requests for a PushApplication or some of its different Variants. The Server translates this request into the platform specific details and delivers the payload to the 3rd party cloud providers, which eventually might deliver the message to the physical device.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Variant</term>
<listitem>
<simpara>A variant of the Push Application, representing a specific mobile platform, like iOS or Android, or even more fine-grained differentiation like iPad or iPhone.
There can be multiple variants for a single Push Application (for example, <emphasis>Mobile HR Android</emphasis>, <emphasis>Mobile HR iPad</emphasis>, <emphasis>Mobile HR iOS free</emphasis> or _Mobile HR iOS premium).
Each supported variant type contains some platform specific properties, such as a Google API key (Android) or passphrase and certificate (Apple).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>APNs</term>
<listitem>
<simpara><link xl:href="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1">Apple Push Notification service</link>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Installation</term>
<listitem>
<simpara>Represents an actual device, registered with the UnifiedPush Server. User1 running <emphasis>HR Android</emphasis> app, while User2 runs <emphasis>HR iPhone premium</emphasis> on his phone.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Administrative User Interface</term>
<listitem>
<simpara>(AUI) The Unified Push Admin UI Web UI that allows you manage Push Applications and Variants, view statistics and send Push Notifications to devices.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="setting-up-the-push-service">
<title>Setting Up the Push Notifications Mobile Service</title>
<section xml:id="obtaining_firebase_cloud_messaging_credentials-push">
<title>Obtaining Firebase Cloud Messaging Credentials</title>
<simpara>This procedure describes how to obtain Firebase Cloud Messaging Credentials.</simpara>
<formalpara>
<title>Prerequisites</title>
<para>Before the Android application is able to receive the notifications, you must set up access to Firebase Cloud Messaging.
The following credentials are necessary to set up Firebase Cloud Messaging for your app:</para>
</formalpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">Server key</emphasis></simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">Sender ID</emphasis></simpara>
</listitem>
<listitem>
<simpara><literal>google-services.json</literal> file containing the credentials required to connect your app to Firebase and Google services.</simpara>
</listitem>
</itemizedlist>
<orderedlist numeration="arabic">
<title>Procedure</title>
<listitem>
<simpara>From the <emphasis>Project Settings</emphasis> screen, switch to the <emphasis>Cloud Messaging</emphasis> tab, where you can find the <emphasis role="strong">Server key</emphasis> and <emphasis role="strong">Sender ID</emphasis> (known in GCM as <emphasis role="strong">Project Number</emphasis>). There is also a <emphasis>Legacy server key</emphasis> but it should not be used for new projects.</simpara>
</listitem>
<listitem>
<simpara>Download the <literal>google-services.json</literal> file as described in the <link xl:href="https://support.google.com/firebase/answer/7015592?hl=en">Google Documentation</link>.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="enable_push_notifications_for_ios_app-push">
<title>Obtaining Apple Push Notification Service Credentials</title>
<simpara>This procedure describes how to enable Push Notifications for your iOS application and get the credentials required for push from Apple.</simpara>
<orderedlist numeration="arabic">
<title>Procedure</title>
<listitem>
<simpara>Follow the <link xl:href="https://help.apple.com/xcode/mac/current/#/devdfd3d04a1">official Apple guide</link> to enable push notifications for your Xcode project.</simpara>
</listitem>
<listitem>
<simpara>Follow the <link xl:href="https://help.apple.com/developer-account/#/dev82a71386a">official Apple guide</link> to generate an APNs client TLS certificate and export the client TLS identity from your Mac.</simpara>
<note>
<simpara>Make sure to protect the p12 file with a password.</simpara>
<simpara>The exported p12 file with the password will be used later when binding your Mobile App to the Push Notifications.</simpara>
</note>
</listitem>
</orderedlist>
</section>
<section xml:id="provisioning-the-push">
<title>Provisioning the Push Notifications Service</title>
<simpara>This section describes how to set up the Push Notifications Mobile Service.</simpara>
<orderedlist numeration="arabic">
<title>Procedure</title>
<listitem>
<simpara>Log into the OpenShift console.</simpara>
</listitem>
<listitem>
<simpara>Create a new project or choose an existing project.</simpara>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">Add to Project</emphasis> and choose <emphasis role="strong">Browse Catalog</emphasis> from the options.</simpara>
<simpara>You can filter the catalog items to only show mobile specific items by clicking the <emphasis role="strong">Mobile</emphasis> tab.</simpara>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">Services</emphasis> and choose the  service.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/catalog-mobile-services.png"/>
</imageobject>
<textobject><phrase>catalog mobile services</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Follow the wizard for provisioning that service.</simpara>
<note>
<simpara>If prompted to <emphasis role="strong">Create a Binding</emphasis>, choose <emphasis role="strong">Do not bind at this time</emphasis></simpara>
</note>
</listitem>
</orderedlist>
<simpara>Once the wizard steps are completed, navigate to the Project Overview in OpenShift to see the newly provisioned service.
Provisioning a service may take some time.</simpara>
</section>
<section xml:id="binding-an-app-to-push">
<title>Binding a Mobile App with the Push Notifications Service</title>
<simpara>To use mobile services, you must represent your mobile app in <emphasis role="strong">Mobile Developer Console</emphasis>, and that app must be associated with the mobile service.
This association is called <emphasis role="strong">binding</emphasis> and it is necessary for your mobile app to use that service.</simpara>
<itemizedlist>
<title>Prerequisites</title>
<listitem>
<simpara>You have created a Mobile App.</simpara>
</listitem>
</itemizedlist>
<informalexample>
<variablelist>
<varlistentry>
<term>Android</term>
<listitem>
<itemizedlist mark="none">
<listitem>
<simpara>&#10003; Google account</simpara>
</listitem>
<listitem>
<simpara>&#10003; Access to the Firebase console. Refer to <link xl:href="https://firebase.google.com/docs/">Firebase Docs</link>.</simpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>iOS</term>
<listitem>
<itemizedlist mark="none">
<listitem>
<simpara>&#10003; Apple Developer account</simpara>
</listitem>
<listitem>
<simpara>&#10003; APNs client TLS certificate. Refer to <link xl:href="https://help.apple.com/developer-account/#/dev82a71386a">official Apple guide</link>.</simpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
</informalexample>
<formalpara>
<title>Procedure</title>
<para>To bind a Mobile App with a mobile service:</para>
</formalpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Log in to the Mobile Developer Console.</simpara>
</listitem>
<listitem>
<simpara>Click on the Mobile App on the Overview screen.</simpara>
</listitem>
<listitem>
<simpara>Navigate to <emphasis role="strong">Mobile Services</emphasis> tab.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/mobile-clients-services-all-unbound.png"/>
</imageobject>
<textobject><phrase>mobile clients services all unbound</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<simpara>It is possible to bind a Mobile App with a mobile service in the OpenShift console, however such bindings are not valid for the purposes of this procedure.</simpara>
</note>
</listitem>
<listitem>
<simpara>Press <emphasis role="strong">Bind to App</emphasis> in the Push Notifications.</simpara>
</listitem>
<listitem>
<simpara>Fill out the binding parameters required by the Push Notifications Service.</simpara>
<simpara>When you bind a mobile client to the Push Notifications service, a variant is created to store the credentials required to communicate with a push network.
Those credentials need to be provided in the binding dialog.</simpara>
<simpara>Choose a <emphasis role="strong">Mobile Client Type</emphasis> and fill out the required fields:</simpara>
<informalexample>
<variablelist>
<varlistentry>
<term>Android</term>
<listitem>
<itemizedlist>
<listitem>
<simpara>Select <literal>Android</literal> from in the <literal>Mobile Client Type</literal> list.</simpara>
</listitem>
<listitem>
<simpara>Enter a <emphasis role="strong">Server Key</emphasis> and a <emphasis role="strong">Sender ID</emphasis>. Both are present in the Firebase console.</simpara>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/mobile-clients-services-push-parameters-android.png"/>
</imageobject>
<textobject><phrase>mobile clients services push parameters android</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</varlistentry>
<varlistentry>
<term>iOS</term>
<listitem>
<itemizedlist>
<listitem>
<simpara>Select <literal>iOS</literal> from the <literal>Mobile Client Type</literal> list.</simpara>
</listitem>
<listitem>
<simpara>Obtain an APNs client TLS certificate. Refer to <link xl:href="https://help.apple.com/developer-account/#/dev82a71386a">official Apple guide</link>.</simpara>
</listitem>
<listitem>
<simpara>Encode the certificate using base64 and paste the encoded certificate into the field labeled <literal>iOS .p12 file</literal>.</simpara>
<simpara>If you are using macOS:</simpara>
<screen>cat &lt;path/to/your/.p12&gt; | base64</screen>
<simpara>If you are using Linux and a version of <literal>base64</literal> that wraps lines, disable line wrapping as follows:</simpara>
<screen>cat &lt;path/to/your/.p12&gt; | base64 --wrap=0</screen>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/mobile-clients-services-push-parameters-ios.png"/>
</imageobject>
<textobject><phrase>mobile clients services push parameters ios</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</varlistentry>
</variablelist>
</informalexample>
<simpara>After clicking <emphasis role="strong">Create</emphasis> your variant will be created in UPS and you should see a new binding for your mobile client. A variant is used for the storage of the credentials provided in the Binding procedure.</simpara>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="setting-up-the-push-client-app">
<title>Configuring your client app</title>
<section xml:id="downloading-the-configuration-file-push">
<title>Downloading the Configuration File</title>
<simpara>The <literal>mobile-services.json</literal> file provides the information for your mobile app to communicate with services.
After you change any configuration in the Mobile Developer Console, it is important to update that file in your IDE.</simpara>
<itemizedlist>
<title>Prerequisites</title>
<listitem>
<simpara>The configuration of your Mobile App in Mobile Developer Console is up-to-date.</simpara>
</listitem>
<listitem>
<simpara>You have set up your mobile app development environment.</simpara>
</listitem>
</itemizedlist>
<orderedlist numeration="arabic">
<title>Procedure</title>
<listitem>
<simpara>Open your Mobile App in Mobile Developer Console.</simpara>
</listitem>
<listitem>
<simpara>Copy the <literal>mobile-services.json</literal> configuration to your clipboard.</simpara>
</listitem>
<listitem>
<simpara>Save the contents of the clipboard to a new file called <literal>mobile-services.json</literal>.</simpara>
<note>
<simpara>The <literal>mobile-services.json</literal> file is the link between your provisioned services on OpenShift and the mobile app you are developing. This file provides all required configuration to initialise the various SDKs and get them hooked up/connected to the back-end services.</simpara>
</note>
</listitem>
<listitem>
<simpara>Move <literal>mobile-services.json</literal> to the following location in your application project:</simpara>
<informalexample>
<simpara><literal>src/mobile-services.json</literal></simpara>
</informalexample>
</listitem>
</orderedlist>
</section>
<section xml:id="setting-up-sdk-push">
<title>Setting up the Push Notifications Service SDK</title>
<simpara>This section helps you to set up the Push Notifications service SDK in your App.
It describes how to set up and initialize the Push Notifications service SDK.</simpara>
<itemizedlist>
<title>Prerequisites</title>
<listitem>
<simpara>Your local <literal>mobile-services.json</literal> file is up-to-date.</simpara>
</listitem>
</itemizedlist>
<informalexample>

</informalexample>
<orderedlist numeration="arabic">
<title>Procedure</title>
<listitem>
<simpara>Import the libraries</simpara>
<informalexample>
<orderedlist numeration="arabic">
<listitem>
<simpara>Install <literal>cordova-plugin-aerogear-push</literal>:</simpara>
<programlisting language="bash" linenumbering="unnumbered">$ cordova plugin add @aerogear/cordova-plugin-aerogear-push</programlisting>
</listitem>
<listitem>
<simpara>Install the Unified Push Server package needed for device registration:</simpara>
<programlisting language="bash" linenumbering="unnumbered">$ npm install --save @aerogear/push</programlisting>
</listitem>
</orderedlist>

</informalexample>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="registering-device">
<title>Registering device on Push Notifications Service</title>
<simpara>To receive native push notifications from a Push Network, for example APNs or FCM, the mobile device is identified with a unique device-token assigned by that Push Network.
This device-token is passed, by the operating system, to the mobile application.
Refer to the operating system and Push Network documentation for further details.</simpara>
<simpara>Every time a user launches a mobile app,  that app receives the  <literal>device-token</literal>, from a <emphasis>platform-specific</emphasis> method (or callback).
Since the Push Network  may assign a new token to a device, Red Hat recommends that the app registers the <literal>device-token</literal> with the UnifiedPush Server each time.</simpara>
<simpara>The required metadata for an <literal>Installation</literal>:</simpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">deviceToken:</emphasis> _Identifies the device/user-agent within its Push Network.</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">variantID:</emphasis> The ID of the variant, where the client belongs to</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">variantSecret:</emphasis> Password of the actual variant</simpara>
</listitem>
</itemizedlist>
<simpara>The AeroGear UnifiedPush Server is able to store some user-specific metadata as well:</simpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">deviceType:</emphasis> The device type of the device or the user agent.</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">operatingSystem:</emphasis> The name of the underlying Operating System.</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">osVersion:</emphasis> The version of the used Operating System.</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">alias:</emphasis> Application specific alias to identify users with the system. For instance an <literal>email address</literal> or a <literal>username</literal>.</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">categories:</emphasis> Used to apply one or more "tags".</simpara>
</listitem>
</itemizedlist>
<simpara>The device-token needs to be registered with the AeroGear UnifiedPush Server, to indicate there is a new Installation for a Variant. This registration is performed by calling an endpoint of the server.</simpara>
<informalexample>
<variablelist>
<varlistentry>
<term>Cordova</term>
<listitem>
<programlisting language="javascript" linenumbering="unnumbered">import { PushRegistration } from "@aerogear/push";

new PushRegistration(app.config).register().then(() =&gt; {
    // Registration with UPS successful, you can now send push notifications from the UPS UI
}).catch(err =&gt; {
    // Error on device registration
});</programlisting>
</listitem>
</varlistentry>
</variablelist>
</informalexample>
</section>
<section xml:id="sending-a-push-notification-push">
<title>Sending a Push Notification using the Unified Push Admin UI</title>
<simpara>The Unified Push Admin UI allows you to send Push Notifications.</simpara>
<itemizedlist>
<title>Prerequisites</title>
<listitem>
<simpara>Make sure the Push Notifications service is provisioned.</simpara>
</listitem>
<listitem>
<simpara>Select a route in OpenShift.</simpara>
</listitem>
<listitem>
<simpara>Login with your OpenShift credentials.</simpara>
</listitem>
</itemizedlist>
<note>
<simpara>On first login you need to provide the OpenShift OAuth service permissions to read your user account.</simpara>
</note>
<informalexample>
<variablelist>
<varlistentry>
<term>Admin UI</term>
<listitem>
<orderedlist numeration="arabic">
<listitem>
<simpara>Open the Unified Push Admin UI in a browser.</simpara>
</listitem>
<listitem>
<simpara>Select the target application from the home page and click <emphasis role="strong">Send Notification To This App</emphasis>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/send1.png"/>
</imageobject>
<textobject><phrase>Send a Push</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>When the <emphasis>Send Push</emphasis> dialog displays, enter text in the <emphasis role="strong">Message</emphasis> form.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="shared/images/send2.png"/>
</imageobject>
<textobject><phrase>Enter the payload</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">Send Push Notification</emphasis> to send the message to the target application.</simpara>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Java API</term>
<listitem>
<orderedlist numeration="arabic">
<listitem>
<simpara>Add <link xl:href="https://github.com/aerogear/aerogear-unifiedpush-java-client/">unifiedpush-java-client</link> as a dependency to your project.</simpara>
<programlisting language="xml" linenumbering="unnumbered">&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.aerogear&lt;/groupId&gt;
  &lt;artifactId&gt;unifiedpush-java-client&lt;/artifactId&gt;
  &lt;version&gt;[version]&lt;/version&gt;
&lt;/dependency&gt;</programlisting>
</listitem>
<listitem>
<simpara>Send the message to the target application.</simpara>
<programlisting language="java" linenumbering="unnumbered">final PushSender sender = DefaultPushSender
        .withRootServerURL("&lt;pushServerURL e.g http(s)//host:port/context&gt;")
        .pushApplicationId("&lt;pushApplicationId e.g. 1234456-234320&gt;")
        .masterSecret("&lt;masterSecret e.g. 1234456-234320&gt;")
        .build();

final UnifiedMessage unifiedMessage = UnifiedMessage
        .withMessage()
        .alert("Hello from Java Sender API!")
        .build();

sender.send(unifiedMessage, () -&gt; {
    //do cool stuff
});</programlisting>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Node.js API</term>
<listitem>
<orderedlist numeration="arabic">
<listitem>
<simpara>Add <link xl:href="https://github.com/aerogear/aerogear-unifiedpush-nodejs-client/">unifiedpush-node-sender</link> as a dependency to your project.</simpara>
<programlisting language="bash" linenumbering="unnumbered">npm i unifiedpush-node-sender</programlisting>
</listitem>
<listitem>
<simpara>Send the message to the target application.</simpara>
<programlisting language="javascript" linenumbering="unnumbered">const agSender = require('unifiedpush-node-sender');

const settings = {
  url: "&lt;pushServerURL e.g http(s)//host:port/context&gt;",
  applicationId: "&lt;pushApplicationId e.g. 1234456-234320&gt;",
  masterSecret: "&lt;masterSecret e.g. 1234456-234320&gt;"

};

const message = {
  alert: "Hello from the Node.js Sender API!"
};

const options = {
  config: {
    ttl: 3600
  }
};

agSender(settings).then((client) =&gt; {
  client.sender.send(message, options).then((response) =&gt; {
    console.log('success', response);
  }).catch((error) =&gt; {
    console.log('error', error);
  })
});</programlisting>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>REST</term>
<listitem>
<orderedlist numeration="arabic">
<listitem>
<simpara>Send the message to the target application.</simpara>
<programlisting language="bash" linenumbering="unnumbered">curl -u "&lt;pushApplicationId&gt;:&lt;masterSecret&gt;"  \
   -v -H "Accept: application/json" -H "Content-type: application/json"  \
   -X POST  -d \
  '{
     "message": {
      "alert": "Hello from the curl HTTP Sender!",
      "sound": "default"
     }
   }'  \
   &lt;pushServerURL&gt;/rest/sender</programlisting>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
</variablelist>
</informalexample>
<note>
<simpara>The 3rd party Push Network is responsible for delivering the Push Notification to the target application.</simpara>
</note>
</section>
<section xml:id="handling-push-notifications-push">
<title>Handling Incoming Push Notifications</title>
<simpara>This section describes how to handle incoming push notifications in your foregrounded application.</simpara>
<note>
<simpara>Push notifications that arrive when the application is in the background are always handled by the OS.</simpara>
</note>
<example>
<title>Procedure</title>
<simpara>Add the following code to your app:</simpara>
<programlisting language="bash" linenumbering="unnumbered">PushRegistration.onMessageReceived((notification: any) =&gt; {
  console.log('Received a push notification', notification);
});</programlisting>

</example>
</section>
</article>